<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ğŸŒ¿ Dream OS v4.3.3 | SIF Al Fikri</title>
  <meta name="theme-color" content="#EAF7ED">
  <meta name="description" content="System Administrasi SIF Al Fikri - Booking 19 Sarana, K3, Inventaris + Cloud Sync">
  
  <style>
    /* ========== HEALING GREEN PREMIUM PALETTE ========== */
    :root {
      --bg-main: #F8FCF6;
      --bg-card: #EAF7ED;
      --accent: #4CAF50;
      --accent-hover: #45A049;
      --text-dark: #2E7D32;
      --border-soft: #C8E6C9;
      --shadow-soft: rgba(0,0,0,0.05);
      --shadow-hover: rgba(0,0,0,0.08);
      --danger: #f44336;
      --warning: #ff9800;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg-main);
      color: var(--text-dark);
      line-height: 1.6;
      padding: 16px;
      max-width: 520px;
      margin: 0 auto;
      min-height: 100vh;
    }

    /* ========== HEADER ========== */
    .header-gradient {
      background: linear-gradient(135deg, #EAF7ED 0%, #F8FCF6 100%);
      padding: 24px 20px;
      border-radius: 20px;
      text-align: center;
      margin-bottom: 20px;
      border: 1px solid var(--border-soft);
      box-shadow: 0 4px 12px var(--shadow-soft);
    }

    .arabic-large {
      font-size: 1.8rem;
      color: var(--text-dark);
      direction: rtl;
      margin: 8px 0;
      font-weight: bold;
      opacity: 0.9;
    }

    .title-main {
      font-size: 1.8rem;
      color: var(--text-dark);
      margin: 12px 0 6px;
      font-weight: 700;
    }

    .subtitle {
      color: #666;
      font-size: 0.95rem;
      margin-bottom: 15px;
    }

    .badge-container {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 15px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      border-radius: 24px;
      font-size: 0.85rem;
      font-weight: 600;
      background: white;
      border: 1px solid var(--border-soft);
      box-shadow: 0 2px 6px var(--shadow-soft);
    }

    .badge.online { color: #4CAF50; }
    .badge.cloud { color: #2196F3; }

    /* ========== CARD SYSTEM ========== */
    .container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .card {
      background: var(--bg-card);
      border-radius: 18px;
      padding: 20px;
      box-shadow: 0 4px 12px var(--shadow-soft);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--border-soft);
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 24px var(--shadow-hover);
    }

    .card-icon {
      font-size: 1.8rem;
      margin-bottom: 12px;
      display: inline-block;
    }

    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 8px;
    }

    .card-desc {
      color: #666;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    /* ========== BUTTONS ========== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 24px;
      border-radius: 14px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      text-decoration: none;
      width: 100%;
      margin-top: 10px;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);
    }

    .btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(76, 175, 80, 0.35);
    }

    .btn-secondary {
      background: white;
      color: var(--text-dark);
      border: 1px solid var(--border-soft);
    }

    .btn-secondary:hover {
      background: var(--bg-card);
      transform: translateY(-2px);
    }

    .btn-small {
      padding: 8px 16px;
      font-size: 0.9rem;
      width: auto;
      margin: 2px;
    }

    .btn-danger {
      background: var(--danger);
      color: white;
    }

    /* ========== FORM ELEMENTS ========== */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      color: var(--text-dark);
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 0.95rem;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 14px 16px;
      border: 1.5px solid var(--border-soft);
      border-radius: 12px;
      font-size: 1rem;
      background: white;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
    }

    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }

    /* ========== TAB SYSTEM ========== */
    .tab-container {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      background: white;
      padding: 8px;
      border-radius: 12px;
      border: 1px solid var(--border-soft);
    }

    .tab-button {
      flex: 1;
      padding: 12px;
      border: none;
      background: transparent;
      color: var(--text-dark);
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .tab-button.active {
      background: var(--accent);
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ========== TABLE STYLING ========== */
    .table-container {
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid var(--border-soft);
      background: white;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
    }

    th {
      background: var(--accent);
      color: white;
      text-align: left;
      padding: 12px;
      font-weight: 600;
      position: sticky;
      top: 0;
    }

    td {
      padding: 12px;
      border-bottom: 1px solid var(--border-soft);
      vertical-align: top;
    }

    tr:last-child td {
      border-bottom: none;
    }

    tr:hover {
      background: var(--bg-card);
    }

    .status-badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .status-good { background: #E8F5E9; color: #2E7D32; }
    .status-warning { background: #FFF3CD; color: #856404; }
    .status-danger { background: #F8D7DA; color: #721C24; }

    /* ========== UTILITY ========== */
    .text-center { text-align: center; }
    .mt-2 { margin-top: 16px; }
    .mb-2 { margin-bottom: 16px; }
    .hidden { display: none !important; }
    .form-slot { display: none; }

    /* ========== MODAL ========== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 16px;
    }

    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 24px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }

    /* ========== RESPONSIVE ========== */
    @media (max-width: 480px) {
      body { padding: 12px; }
      .header-gradient { padding: 20px 16px; }
      .card { padding: 16px; }
      .btn { padding: 12px 20px; }
      th, td { padding: 8px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HEADER -->
    <div class="header-gradient">
      <div class="arabic-large">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
      <div class="arabic-large">Ø§ÙÙ„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ ØµÙÙ„ÙÙ‘ Ø¹ÙÙ„ÙÙ‰ Ø³ÙÙŠÙÙ‘Ø¯ÙÙ†ÙØ§ Ù…ÙØ­ÙÙ…ÙÙ‘Ø¯Ù</div>
      
      <h1 class="title-main">ğŸŒ¿ Dream OS v4.3.3</h1>
      <div class="subtitle">SIF Al Fikri â€¢ 19 Sarana â€¢ Smart Inventory</div>
      
      <div class="badge-container">
        <div class="badge online">ğŸŸ¢ ONLINE</div>
        <div class="badge cloud">â˜ï¸ SMART INVENTORY</div>
      </div>
    </div>

    <!-- MAIN MENU -->
    <div class="card" onclick="switchView('booking')">
      <div class="card-icon">ğŸ“</div>
      <h3 class="card-title">Form Booking</h3>
      <p class="card-desc">Booking 19 sarana lengkap dengan validasi otomatis</p>
    </div>

    <div class="card" onclick="switchView('k3')">
      <div class="card-icon">âš ï¸</div>
      <h3 class="card-title">Form K3</h3>
      <p class="card-desc">Laporan kerusakan + kamera ke Pak Erwin</p>
    </div>

    <div class="card" onclick="switchView('admin')">
      <div class="card-icon">ğŸ”</div>
      <h3 class="card-title">Admin Panel</h3>
      <p class="card-desc">Login email: <strong>teknisi@alfikri.sch.id</strong></p>
    </div>

    <!-- PARTIAL SLOTS -->
    <div id="slot-booking" class="form-slot"></div>
    <div id="slot-k3" class="form-slot"></div>
    <div id="slot-admin" class="form-slot"></div>

    <!-- FOOTER -->
    <div class="text-center" style="color: #666; margin-top: 30px; font-size: 0.85rem;">
      <div style="color: var(--text-dark); font-weight: 600; margin-bottom: 8px;">
        Dream Team â€¢ The Power Soul of Shalawat
      </div>
      Â© 2025 SIF Al Fikri â€¢ Smart Inventory â€¢ Built with â¤ï¸ & ğŸ•Œ<br>
      ğŸ‡²ğŸ‡¨ğŸ‡µğŸ‡¸
    </div>
  </div>

  <!-- ========== PARTIAL TEMPLATES ========== -->
  <template id="partial-booking">
    <div class="header-gradient">
      <div class="arabic-large">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
      <h1 class="title-main">ğŸ“… Form Booking</h1>
    </div>
    <div class="card">
      <p class="text-center">Booking 19 Sarana SIF Al Fikri</p>
      <button class="btn btn-secondary" onclick="switchView('main')">â† Kembali</button>
    </div>
  </template>

  <template id="partial-k3">
    <div class="header-gradient">
      <div class="arabic-large">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
      <h1 class="title-main">âš ï¸ Form K3</h1>
    </div>
    <div class="card">
      <p class="text-center">Laporan K3 ke Pak Erwin</p>
      <button class="btn btn-secondary" onclick="switchView('main')">â† Kembali</button>
    </div>
  </template>

  <template id="partial-admin">
    <div class="header-gradient">
      <div class="arabic-large">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„ÙÙ‘Ù°Ù‡Ù Ù±Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
      <h1 class="title-main">ğŸ” Admin Panel</h1>
    </div>

    <div class="card">
      <!-- LOGIN FORM -->
      <div id="adminLoginForm">
        <div class="form-group">
          <label class="form-label">Email Admin</label>
          <input type="email" class="form-input" id="adminEmail" placeholder="teknisi@alfikri.sch.id">
        </div>
        <button class="btn btn-primary" onclick="loginAdmin()">Login</button>
        <button class="btn btn-secondary" onclick="switchView('main')">â† Kembali</button>
      </div>

      <!-- ADMIN CONTENT (HIDDEN INITIALLY) -->
      <div id="adminContent" class="hidden">
        <div class="tab-container">
          <button class="tab-button active" data-tab="dashboard">ğŸ“Š Dashboard</button>
          <button class="tab-button" data-tab="inventaris">ğŸ“¦ Inventaris</button>
        </div>

        <!-- DASHBOARD TAB -->
        <div id="dashboard-tab" class="tab-content active">
          <h3 class="card-title">Dashboard Admin</h3>
          <p class="card-desc">Selamat datang di admin panel</p>
          
          <div class="card" style="background: white; margin-top: 16px;">
            <h4>ğŸ“ˆ Statistik Sistem</h4>
            <div style="display: flex; justify-content: space-between; margin-top: 12px;">
              <div>Total Booking:</div>
              <div id="statsBookingCount">0</div>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <div>Total K3:</div>
              <div id="statsK3Count">0</div>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <div>Total Inventaris:</div>
              <div id="statsInventarisCount">0</div>
            </div>
          </div>

          <div class="btn btn-primary mt-2" onclick="exportData()">ğŸ“¥ Export Semua Data</div>
        </div>

        <!-- INVENTARIS TAB -->
        <div id="inventaris-tab" class="tab-content">
          <h3 class="card-title">ğŸ“¦ Smart Inventory</h3>
          <p class="card-desc">Kelola aset sekolah secara digital</p>

          <button class="btn btn-primary" onclick="showAddItemModal()">
            â• Tambah Barang Baru
          </button>

          <div class="table-container mt-2">
            <table>
              <thead>
                <tr>
                  <th>Kode</th>
                  <th>Nama Barang</th>
                  <th>Kategori</th>
                  <th>Jumlah</th>
                  <th>Kondisi</th>
                  <th>Lokasi</th>
                  <th>Aksi</th>
                </tr>
              </thead>
              <tbody id="inventaris-table-body">
                <!-- Data akan diisi oleh JavaScript -->
              </tbody>
            </table>
            <div id="inventaris-empty" class="text-center" style="padding: 40px; color: #666;">
              ğŸ“¦ Belum ada data inventaris.<br>
              Tekan "Tambah Barang Baru" untuk memulai.
            </div>
          </div>
        </div>

        <button class="btn btn-secondary mt-2" onclick="logoutAdmin()">Logout</button>
      </div>
    </div>
  </template>

  <!-- MODAL TAMBAH BARANG -->
  <div id="addItemModal" class="modal-overlay hidden">
    <div class="modal-content">
      <h3 class="card-title">â• Tambah Barang Inventaris</h3>
      
      <div class="form-group">
        <input type="text" class="form-input" id="invKode" placeholder="Kode Barang (INV-001)" required>
      </div>
      
      <div class="form-group">
        <input type="text" class="form-input" id="invNama" placeholder="Nama Barang" required>
      </div>
      
      <div class="form-group">
        <select class="form-select" id="invKategori" required>
          <option value="">-- Pilih Kategori --</option>
          <option value="Elektronik">Elektronik</option>
          <option value="Furnitur">Furnitur</option>
          <option value="Alat Kebersihan">Alat Kebersihan</option>
          <option value="ATK">ATK</option>
          <option value="Olahraga">Olahraga</option>
          <option value="Lainnya">Lainnya</option>
        </select>
      </div>
      
      <div class="form-group">
        <input type="number" class="form-input" id="invJumlah" placeholder="Jumlah" min="1" value="1" required>
      </div>
      
      <div class="form-group">
        <select class="form-select" id="invKondisi" required>
          <option value="Baik">âœ… Baik</option>
          <option value="Rusak">âš ï¸ Rusak</option>
          <option value="Perlu Perbaikan">ğŸ”§ Perlu Perbaikan</option>
        </select>
      </div>
      
      <div class="form-group">
        <input type="text" class="form-input" id="invLokasi" placeholder="Lokasi (Labkom SMP)" required>
      </div>
      
      <div class="form-group">
        <input type="date" class="form-input" id="invTanggal" required>
      </div>
      
      <div class="form-group">
        <textarea class="form-textarea" id="invKeterangan" placeholder="Keterangan (opsional)"></textarea>
      </div>
      
      <div style="display: flex; gap: 10px;">
        <button class="btn btn-primary" onclick="saveInventarisItem()">âœ… Simpan</button>
        <button class="btn btn-secondary" onclick="hideAddItemModal()">Batal</button>
      </div>
    </div>
  </div>

  <script>
    // ========== CONFIG ==========
    const CONFIG = {
      ADMIN_EMAIL: 'teknisi@alfikri.sch.id',
      STORAGE_KEYS: {
        BOOKINGS: 'dream_bookings',
        K3_REPORTS: 'dream_k3_reports',
        INVENTARIS: 'dream_inventaris',
        ADMIN_SESSION: 'dream_admin_session'
      }
    };

    // ========== VIEW SYSTEM ==========
    function switchView(view) {
      // Hide all slots
      ['slot-booking', 'slot-k3', 'slot-admin'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = 'none';
      });
      
      // Show main menu cards
      document.querySelectorAll('.card[onclick^="switchView"]').forEach(card => {
        card.style.display = view === 'main' ? 'block' : 'none';
      });
      
      if (view === 'main') return;
      
      // Load partial
      const template = document.getElementById(`partial-${view}`);
      const slot = document.getElementById(`slot-${view}`);
      
      if (template && slot) {
        slot.innerHTML = '';
        slot.appendChild(template.content.cloneNode(true));
        slot.style.display = 'block';
        
        // Initialize specific views
        if (view === 'admin') {
          checkAdminSession();
        }
      }
      
      window.scrollTo(0, 0);
    }

    // ========== ADMIN SYSTEM ==========
    function checkAdminSession() {
      const session = localStorage.getItem(CONFIG.STORAGE_KEYS.ADMIN_SESSION);
      if (session && Date.now() - parseInt(session) < 3600000) {
        // Session valid (1 hour)
        showAdminContent();
      }
    }

    function loginAdmin() {
      const email = document.getElementById('adminEmail').value.trim().toLowerCase();
      if (email === CONFIG.ADMIN_EMAIL) {
        localStorage.setItem(CONFIG.STORAGE_KEYS.ADMIN_SESSION, Date.now().toString());
        showAdminContent();
      } else {
        alert('âŒ Email admin tidak valid. Gunakan email resmi Bagian Umum.');
      }
    }

    function showAdminContent() {
      document.getElementById('adminLoginForm').style.display = 'none';
      document.getElementById('adminContent').style.display = 'block';
      
      // Load stats
      loadStats();
      
      // Setup tab system
      setupTabs();
      
      // Load inventory data
      loadInventaris();
    }

    function logoutAdmin() {
      localStorage.removeItem(CONFIG.STORAGE_KEYS.ADMIN_SESSION);
      switchView('main');
    }

    function loadStats() {
      const bookings = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.BOOKINGS) || '[]');
      const k3Reports = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.K3_REPORTS) || '[]');
      const inventaris = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]');
      
      document.getElementById('statsBookingCount').textContent = bookings.length;
      document.getElementById('statsK3Count').textContent = k3Reports.length;
      document.getElementById('statsInventarisCount').textContent = inventaris.length;
    }

    // ========== TAB SYSTEM ==========
    function setupTabs() {
      const tabButtons = document.querySelectorAll('.tab-button');
      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const tabId = button.getAttribute('data-tab');
          
          // Update active button
          tabButtons.forEach(btn => btn.classList.remove('active'));
          button.classList.add('active');
          
          // Show active tab
          document.querySelectorAll('.tab-content').forEach(content => {
            content.classList.remove('active');
          });
          document.getElementById(`${tabId}-tab`).classList.add('active');
          
          // Load data if inventory tab
          if (tabId === 'inventaris') {
            loadInventaris();
          }
        });
      });
    }

    // ========== INVENTORY SYSTEM ==========
    function showAddItemModal() {
      const modal = document.getElementById('addItemModal');
      modal.classList.remove('hidden');
      
      // Set today's date
      document.getElementById('invTanggal').value = new Date().toISOString().split('T')[0];
      
      // Focus on first field
      setTimeout(() => {
        document.getElementById('invKode').focus();
      }, 100);
    }

    function hideAddItemModal() {
      document.getElementById('addItemModal').classList.add('hidden');
      // Reset form
      document.getElementById('invKode').value = '';
      document.getElementById('invNama').value = '';
      document.getElementById('invKategori').value = '';
      document.getElementById('invJumlah').value = '1';
      document.getElementById('invKondisi').value = 'Baik';
      document.getElementById('invLokasi').value = '';
      document.getElementById('invTanggal').value = '';
      document.getElementById('invKeterangan').value = '';
    }

    function saveInventarisItem() {
      const item = {
        id: Date.now(),
        kode: document.getElementById('invKode').value.trim(),
        nama: document.getElementById('invNama').value.trim(),
        kategori: document.getElementById('invKategori').value,
        jumlah: parseInt(document.getElementById('invJumlah').value),
        kondisi: document.getElementById('invKondisi').value,
        lokasi: document.getElementById('invLokasi').value.trim(),
        tanggal: document.getElementById('invTanggal').value,
        keterangan: document.getElementById('invKeterangan').value.trim(),
        createdAt: new Date().toISOString()
      };

      // Validation
      if (!item.kode || !item.nama || !item.kategori || !item.lokasi || !item.tanggal) {
        alert('âŒ Semua kolom wajib diisi (kecuali keterangan)!');
        return;
      }

      if (item.jumlah < 1) {
        alert('âŒ Jumlah harus minimal 1!');
        return;
      }

      // Save to localStorage
      const inventaris = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]');
      inventaris.push(item);
      localStorage.setItem(CONFIG.STORAGE_KEYS.INVENTARIS, JSON.stringify(inventaris));

      // Update UI
      hideAddItemModal();
      loadInventaris();
      loadStats();
      
      alert('âœ… Barang berhasil ditambahkan ke inventaris!');
    }

    function loadInventaris() {
      const inventaris = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]');
      const tbody = document.getElementById('inventaris-table-body');
      const empty = document.getElementById('inventaris-empty');
      
      if (!tbody || !empty) return;
      
      if (inventaris.length === 0) {
        tbody.innerHTML = '';
        empty.style.display = 'block';
        return;
      }
      
      empty.style.display = 'none';
      
      // Sort by newest first
      inventaris.sort((a, b) => b.id - a.id);
      
      tbody.innerHTML = inventaris.map(item => {
        const statusClass = item.kondisi === 'Baik' ? 'status-good' : 
                          item.kondisi === 'Rusak' ? 'status-danger' : 'status-warning';
        
        return `
          <tr>
            <td><strong>${item.kode}</strong></td>
            <td>${item.nama}</td>
            <td>${item.kategori}</td>
            <td>${item.jumlah}</td>
            <td><span class="status-badge ${statusClass}">${item.kondisi}</span></td>
            <td>${item.lokasi}</td>
            <td>
              <button class="btn-small btn-secondary" onclick="editItem(${item.id})">âœï¸</button>
              <button class="btn-small btn-danger" onclick="deleteItem(${item.id})">ğŸ—‘ï¸</button>
            </td>
          </tr>
        `;
      }).join('');
    }

    function editItem(id) {
      const inventaris = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]');
      const item = inventaris.find(item => item.id === id);
      
      if (item) {
        // Populate modal with item data
        document.getElementById('invKode').value = item.kode;
        document.getElementById('invNama').value = item.nama;
        document.getElementById('invKategori').value = item.kategori;
        document.getElementById('invJumlah').value = item.jumlah;
        document.getElementById('invKondisi').value = item.kondisi;
        document.getElementById('invLokasi').value = item.lokasi;
        document.getElementById('invTanggal').value = item.tanggal;
        document.getElementById('invKeterangan').value = item.keterangan;
        
        // Show modal
        showAddItemModal();
        
        // TODO: Implement update logic (for now, it will create new)
        alert('â„¹ï¸ Fitur edit sedang dalam pengembangan. Untuk saat ini, silakan hapus dan tambah ulang.');
      }
    }

    function deleteItem(id) {
      if (!confirm('âš ï¸ Hapus barang ini dari inventaris?')) return;
      
      const inventaris = JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]');
      const newInventaris = inventaris.filter(item => item.id !== id);
      
      localStorage.setItem(CONFIG.STORAGE_KEYS.INVENTARIS, JSON.stringify(newInventaris));
      
      loadInventaris();
      loadStats();
      
      alert('âœ… Barang berhasil dihapus!');
    }

    // ========== UTILITY FUNCTIONS ==========
    function exportData() {
      const data = {
        exportedAt: new Date().toISOString(),
        bookings: JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.BOOKINGS) || '[]'),
        k3Reports: JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.K3_REPORTS) || '[]'),
        inventaris: JSON.parse(localStorage.getItem(CONFIG.STORAGE_KEYS.INVENTARIS) || '[]')
      };
      
      const dataStr = JSON.stringify(data, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);
      
      const link = document.createElement('a');
      link.setAttribute('href', dataUri);
      link.setAttribute('download', `dream-os-backup-${new Date().toISOString().split('T')[0]}.json`);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      alert('âœ… Data berhasil diexport!');
    }

    // ========== INITIALIZE ==========
    document.addEventListener('DOMContentLoaded', function() {
      switchView('main');
      
      // Check if today's date should be set in any date inputs
      const today = new Date().toISOString().split('T')[0];
      document.querySelectorAll('input[type="date"]').forEach(input => {
        if (!input.value) {
          input.value = today;
        }
      });
    });
  </script>
</body>
</html>
