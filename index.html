<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream OS v2.0 - SIF Al Fikri</title>
    <!-- FONT ARABIC FIX -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --indonesia-red: #FF0000;       /* Merah bendera Indonesia */
            --indonesia-white: #FFFFFF;      /* Putih bendera Indonesia */
            --palestine-black: #000000;      /* Hitam bendera Palestina */
            --palestine-green: #006400;      /* Hijau bendera Palestina */
            --palestine-white: #FFFFFF;      /* Putih bendera Palestina */
            --healing-mint: #E8F5E9;
            --healing-cream: #F9FBE7;
            --healing-light: #FFFDE7;
            --army-green: #2D5D4B;
            --sage-green: #4A7856;
            --gold: #D4AF37;
            --text-dark: #2C3E50;
            --white: #FFFFFF;
            --support-blue: #1E88E5;         /* Warna untuk support */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        /* ========== BACKGROUND HEALING GRADIENT ========== */
        body {
            background: linear-gradient(135deg, 
                var(--healing-mint) 0%,    
                #F1F8E9 25%,   
                var(--healing-cream) 50%,   
                var(--healing-light) 75%,   
                var(--healing-mint) 100%   
            ) !important;
            background-attachment: fixed !important;
            background-size: 400% 400% !important;
            animation: gentleWave 20s ease infinite !important;
            color: var(--text-dark);
            min-height: 100vh;
            padding: 20px;
        }

        @keyframes gentleWave {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* ========== HEADER BENDERA INDONESIA-PALESTINA ========== */
        .spiritual-header {
            background: linear-gradient(135deg, 
                var(--indonesia-red) 0%,    /* Merah Indonesia */
                var(--indonesia-red) 33%, 
                var(--indonesia-white) 33%, /* Putih Indonesia */
                var(--indonesia-white) 66%,
                var(--palestine-black) 66%, /* Hitam Palestina */
                var(--palestine-black) 100%
            ), 
            linear-gradient(135deg, 
                transparent 0%,
                transparent 33%,
                transparent 33%,
                transparent 66%,
                var(--palestine-white) 66%,  /* Putih Palestina */
                var(--palestine-white) 83%,
                var(--palestine-green) 83%,  /* Hijau Palestina */
                var(--palestine-green) 100%
            ) !important;
            background-blend-mode: overlay;
            background-size: 400% 400% !important;
            animation: gradientFlow 15s ease infinite !important;
            color: var(--white);
            padding: 30px 20px;
            text-align: center;
            border-radius: 20px 20px 0 0;
            position: relative;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* Overlay untuk kontras teks */
        .spiritual-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 1;
        }

        .spiritual-header > * {
            position: relative;
            z-index: 2;
        }

        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .arabic-large {
            font-family: 'Amiri', 'Scheherazade New', serif !important;
            font-size: 2.8rem !important;
            color: var(--gold) !important;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.7);
            display: flex;
            justify-content: space-between;
            padding: 0 20px;
        }

        .bismillah {
            font-family: 'Amiri', 'Scheherazade New', serif !important;
            font-size: 1.8rem !important;
            color: var(--gold) !important;
            margin: 15px 0;
            line-height: 1.6;
        }

        .shalawat {
            font-family: 'Amiri', 'Scheherazade New', serif !important;
            font-size: 1.4rem !important;
            color: rgba(255, 255, 255, 0.95) !important;
            margin: 10px 0;
        }

        .salam {
            font-size: 1.3rem;
            color: var(--white);
            margin-top: 15px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        /* ========== MAIN CONTAINER ========== */
        .main-container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 0 0 20px 20px;
            box-shadow: 0 15px 40px rgba(45, 93, 75, 0.15);
            overflow: hidden;
            border: 2px solid var(--sage-green);
            backdrop-filter: blur(10px);
        }

        /* ========== MENU UTAMA ========== */
        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px;
            background: rgba(248, 251, 246, 0.7);
        }

        .menu-card {
            background: var(--white);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
        }

        .menu-card.booking::before { background: linear-gradient(to right, var(--army-green), var(--sage-green)); }
        .menu-card.k3::before { background: linear-gradient(to right, #FF9800, #FFB74D); }
        .menu-card.inventaris::before { background: linear-gradient(to right, #D32F2F, #F44336); }

        .menu-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .menu-card i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--army-green);
        }

        .menu-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .menu-card p {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .menu-card.inventaris small {
            display: block;
            margin-top: 10px;
            color: #D32F2F;
            font-size: 0.85rem;
        }

        /* ========== FORM CONTAINERS ========== */
        .form-container {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .back-btn {
            background: var(--army-green);
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            transition: 0.3s;
        }

        .back-btn:hover {
            background: var(--sage-green);
            transform: translateX(-5px);
        }

        /* ========== FORM STYLING ========== */
        .form-title {
            color: var(--army-green);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--healing-mint);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-dark);
            font-size: 1rem;
        }

        label i {
            margin-right: 10px;
            color: var(--army-green);
        }

        input, select, textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #E0E0E0;
            border-radius: 12px;
            font-size: 1rem;
            transition: 0.3s;
            background: var(--healing-mint);
        }

        input:focus, select:focus, textarea:focus {
            border-color: var(--army-green);
            background: var(--white);
            outline: none;
            box-shadow: 0 0 0 4px rgba(45, 93, 75, 0.1);
        }

        /* SARANA SELECT */
        optgroup {
            font-weight: 600;
            color: var(--army-green);
        }

        optgroup option {
            font-weight: normal;
            padding: 10px;
        }

        /* CHECKLIST ALAT */
        .alat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 10px;
            padding: 15px;
            background: var(--healing-mint);
            border-radius: 12px;
            border: 1px dashed var(--sage-green);
        }

        .alat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alat-item input {
            width: auto;
        }

        /* SOP NOTIFICATION */
        .sop-notification {
            background: #FFF8E1;
            border-left: 5px solid #FF9800;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .sop-notification h4 {
            color: #FF9800;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* SUBMIT BUTTON */
        .submit-btn {
            background: linear-gradient(to right, var(--army-green), var(--sage-green));
            color: var(--white);
            border: none;
            padding: 18px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            box-shadow: 0 10px 20px rgba(45, 93, 75, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(45, 93, 75, 0.4);
        }

        /* ALERT & LOADING */
        .alert {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .alert.success {
            background: #E8F5E9;
            color: #2E7D32;
            border: 2px solid #A5D6A7;
        }

        .alert.error {
            background: #FFEBEE;
            color: #C62828;
            border: 2px solid #EF9A9A;
        }

        .alert.warning {
            background: #FFF8E1;
            color: #F57C00;
            border: 2px solid #FFCC80;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }

        .spinner {
            border: 5px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top: 5px solid var(--army-green);
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ========== APPROVAL SYSTEM ========== */
        .approval-system {
            background: linear-gradient(135deg, #E3F2FD, #E8F5E9);
            padding: 25px;
            border-radius: 15px;
            margin: 30px auto;
            max-width: 800px;
            border: 2px solid var(--sage-green);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .approval-title {
            text-align: center;
            color: var(--army-green);
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px dashed var(--sage-green);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .approval-title i {
            color: var(--support-blue);
            font-size: 1.8rem;
        }

        .support-text {
            color: var(--support-blue);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .approval-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .approval-person {
            flex: 1;
            text-align: center;
            padding: 25px 20px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
            border-top: 5px solid var(--sage-green);
            transition: transform 0.3s ease;
        }

        .approval-person:hover {
            transform: translateY(-5px);
        }

        .approval-person h3 {
            color: var(--army-green);
            font-size: 1.3rem;
            margin-bottom: 10px;
        }

        .approval-person p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .approval-person.left {
            border-top-color: var(--support-blue);
            order: 1;
        }

        .approval-person.right {
            border-top-color: #4CAF50;
            order: 3;
        }

        .support-center {
            order: 2;
            flex: 0.5;
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, var(--support-blue), #42A5F5);
            color: white;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1rem;
            box-shadow: 0 10px 20px rgba(30, 136, 229, 0.3);
        }

        /* ========== FOOTER DREAM TEAM ========== */
        .dream-footer {
            background: rgba(248, 251, 246, 0.9);
            padding: 30px;
            text-align: center;
            border-top: 2px solid var(--sage-green);
            margin-top: 40px;
        }

        .power-shalawat {
            font-size: 1.4rem;
            color: var(--army-green);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .dream-team {
            margin: 25px 0;
            padding: 20px;
            background: var(--white);
            border-radius: 15px;
            border: 1px dashed #DDD;
        }

        .team-small {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .team-member-small {
            font-size: 0.85rem;
            color: #666;
            padding: 8px 15px;
            background: #F5F5F5;
            border-radius: 20px;
            border: 1px solid #DDD;
        }

        .team-note {
            font-size: 0.8rem;
            color: #888;
            font-style: italic;
            margin-top: 10px;
        }

        .copyright {
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #EEE;
            padding-top: 15px;
        }

        /* PASSWORD MODAL */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .password-box {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            border: 3px solid var(--gold);
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .main-menu { grid-template-columns: 1fr; padding: 20px; }
            .arabic-large { font-size: 2rem !important; }
            .bismillah { font-size: 1.4rem !important; }
            .shalawat { font-size: 1.1rem !important; }
            .alat-grid { grid-template-columns: 1fr; }
            
            .approval-row {
                flex-direction: column;
            }
            
            .approval-person.left,
            .approval-person.right {
                order: unset;
                width: 100%;
            }
            
            .support-center {
                order: 2;
                margin: 15px 0;
                width: 60px;
                height: 60px;
                font-size: 0.9rem;
            }
            
            .team-small {
                flex-direction: column;
                align-items: center;
            }
            
            .team-member-small {
                width: 80%;
                text-align: center;
            }
            
            .spiritual-header { padding: 20px 15px; }
        }
    </style>
</head>
<body>
    <!-- HEADER SPIRITUAL BENDERA INDONESIA-PALESTINA -->
    <div class="spiritual-header">
        <div class="arabic-large">
            <span>Ô∑≤</span>
            <span>ŸÖÿ≠ŸÖÿØ Ô∑∫</span>
        </div>

        <div class="bismillah">
            ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸéŸëŸ∞ŸáŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê Ÿ±ŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê
        </div>

        <div class="shalawat">
            ÿßŸéŸÑŸÑŸéŸëŸáŸèŸÖŸéŸë ÿµŸéŸÑŸêŸë ÿπŸéŸÑŸéŸâ ÿ≥ŸéŸäŸêŸëÿØŸêŸÜŸéÿß ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸç
        </div>

        <div class="salam">
            Assalamu'alaikum
        </div>
    </div>

    <!-- MAIN CONTAINER -->
    <div class="main-container">
        <!-- MAIN MENU -->
        <div id="mainMenu" class="main-menu">
            <!-- FORM BOOKING -->
            <div class="menu-card booking" onclick="showForm('booking')">
                <i class="fas fa-calendar-check"></i>
                <h3>Form Booking</h3>
                <p>Booking fasilitas sekolah dengan SOP lengkap dan validasi otomatis</p>
            </div>

            <!-- FORM K3 -->
            <div class="menu-card k3" onclick="showForm('k3')">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Form K3</h3>
                <p>Laporan Kerusakan, Kehilangan, dan Kejadian penting di lingkungan sekolah</p>
            </div>

            <!-- FORM INVENTARIS -->
            <div class="menu-card inventaris" onclick="requestPassword()">
                <i class="fas fa-boxes"></i>
                <h3>Form Inventaris</h3>
                <p>Data inventaris sekolah (terproteksi password untuk admin terpilih)</p>
                <small><i class="fas fa-lock"></i> Password diperlukan</small>
            </div>
        </div>

        <!-- ========== FORM BOOKING ========== -->
        <div id="bookingForm" class="form-container">
            <button class="back-btn" onclick="showMainMenu()">
                <i class="fas fa-arrow-left"></i> Kembali ke Menu Utama
            </button>

            <h2 class="form-title"><i class="fas fa-calendar-alt"></i> Form Booking Fasilitas</h2>

            <!-- SOP NOTIFICATION -->
            <div class="sop-notification">
                <h4><i class="fas fa-info-circle"></i> SOP Booking SIF Al Fikri</h4>
                <p>‚Ä¢ Jam aktif: 07.30 ‚Äì 16.00 WIB (Senin-Jumat)</p>
                <p>‚Ä¢ Sabtu: Hanya untuk acara khusus dengan izin</p>
                <p>‚Ä¢ Minggu: Tidak melayani booking</p>
                <p>‚Ä¢ Jumat: Aula SMP & Serbaguna TIDAK TERSEDIA jam 10.30‚Äì13.00 (shalat Jumat)</p>
            </div>

            <!-- ALERT -->
            <div id="alert" class="alert"></div>

            <!-- LOADING -->
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>Memproses booking...</p>
            </div>

            <!-- FORM INPUT -->
            <form id="bookingFormElement">
                <!-- NAMA -->
                <div class="form-group">
                    <label for="nama"><i class="fas fa-user"></i> Nama Lengkap *</label>
                    <input type="text" id="nama" placeholder="Masukkan nama lengkap" required>
                </div>

                <!-- KELAS/DIVISI -->
                <div class="form-group">
                    <label for="kelas"><i class="fas fa-graduation-cap"></i> Kelas/Divisi *</label>
                    <input type="text" id="kelas" placeholder="Contoh: X TKJ 1, Guru TIK, OSIS" required>
                </div>

                <!-- WHATSAPP -->
                <div class="form-group">
                    <label for="whatsapp"><i class="fab fa-whatsapp"></i> Nomor WhatsApp *</label>
                    <input type="tel" id="whatsapp" placeholder="08123456789" pattern="[0-9]{10,13}" required>
                </div>

                <!-- SARANA -->
                <div class="form-group">
                    <label for="sarana"><i class="fas fa-building"></i> Sarana yang Dipesan *</label>
                    <select id="sarana" required>
                        <optgroup label="üè¢ Aula & Serbaguna">
                            <option value="Aula SMP - sound, lighting, AC, projector">Aula SMP</option>
                            <option value="Aula SMA - sound">Aula SMA</option>
                            <option value="Serbaguna - sound">Serbaguna</option>
                            <option value="Masjid - sound">Masjid</option>
                            <option value="Saung Besar - sound">Saung Besar</option>
                            <option value="Saung Kecil">Saung Kecil</option>
                        </optgroup>
                        <optgroup label="üíª Lab Komputer">
                            <option value="Labkom SD">Labkom SD</option>
                            <option value="Labkom SMP">Labkom SMP</option>
                            <option value="Labkom SMA">Labkom SMA</option>
                        </optgroup>
                        <optgroup label="üèÄ Lapangan">
                            <option value="Lapangan Volley">Lapangan Volley</option>
                            <option value="Lapangan Basket">Lapangan Basket</option>
                            <option value="Lapangan SMA">Lapangan SMA</option>
                            <option value="Lapangan Tanah">Lapangan Tanah</option>
                        </optgroup>
                        <optgroup label="üçΩÔ∏è Kantin">
                            <option value="Kantin SMP">Kantin SMP</option>
                            <option value="Kantin SMA">Kantin SMA</option>
                        </optgroup>
                        <optgroup label="üìö Perpustakaan">
                            <option value="Perpus SD">Perpus SD</option>
                            <option value="Perpus SMP">Perpus SMP</option>
                            <option value="Perpus SMA">Perpus SMA</option>
                        </optgroup>
                    </select>
                </div>

                <!-- CHECKLIST ALAT -->
                <div class="form-group">
                    <label><i class="fas fa-tools"></i> Pilih Alat yang Dibutuhkan (Opsional):</label>
                    <div class="alat-grid">
                        <div class="alat-item">
                            <input type="checkbox" id="alat1" name="alat" value="Sound Portable">
                            <label for="alat1">Sound Portable</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat2" name="alat" value="Projector">
                            <label for="alat2">Projector</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat3" name="alat" value="Mic Standing">
                            <label for="alat3">Mic Standing</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat4" name="alat" value="Meja Panjang">
                            <label for="alat4">Meja Panjang</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat5" name="alat" value="Meja Siswa">
                            <label for="alat5">Meja Siswa</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat6" name="alat" value="Meja Oshin">
                            <label for="alat6">Meja Oshin</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat7" name="alat" value="Kursi Futura">
                            <label for="alat7">Kursi Futura</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat8" name="alat" value="Kursi Chitose">
                            <label for="alat8">Kursi Chitose</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat9" name="alat" value="Kursi Siswa">
                            <label for="alat9">Kursi Siswa</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat10" name="alat" value="Kabel HDMI">
                            <label for="alat10">Kabel HDMI</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat11" name="alat" value="Kabel VGA">
                            <label for="alat11">Kabel VGA</label>
                        </div>
                        <div class="alat-item">
                            <input type="checkbox" id="alat12" name="alat" value="Kabel Rol AC">
                            <label for="alat12">Kabel Rol AC</label>
                        </div>
                    </div>
                </div>

                <!-- TANGGAL & WAKTU -->
                <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div>
                        <label for="tanggal"><i class="fas fa-calendar-day"></i> Tanggal *</label>
                        <input type="date" id="tanggal" required>
                    </div>
                    <div>
                        <label for="waktuMulai"><i class="fas fa-clock"></i> Waktu Mulai *</label>
                        <input type="time" id="waktuMulai" min="07:30" max="16:00" step="1800" required>
                    </div>
                    <div>
                        <label for="waktuSelesai"><i class="fas fa-clock"></i> Waktu Selesai *</label>
                        <input type="time" id="waktuSelesai" min="07:30" max="16:00" step="1800" required>
                    </div>
                </div>

                <!-- KETERANGAN -->
                <div class="form-group">
                    <label for="keterangan"><i class="fas fa-sticky-note"></i> Keterangan (Tujuan) *</label>
                    <textarea id="keterangan" rows="3" placeholder="Contoh: Untuk pelajaran TIK, rapat OSIS, lomba, dll." required></textarea>
                </div>

                <!-- SUBMIT -->
                <button type="submit" class="submit-btn">
                    <i class="fab fa-whatsapp"></i> Kirim ke Pak Hanung & Pak Erwin
                </button>
            </form>
        </div>

        <!-- ========== FORM K3 ========== -->
        <div id="k3Form" class="form-container">
            <button class="back-btn" onclick="showMainMenu()">
                <i class="fas fa-arrow-left"></i> Kembali ke Menu Utama
            </button>

            <h2 class="form-title"><i class="fas fa-exclamation-triangle"></i> Form K3</h2>

            <div class="alert warning">
                <i class="fas fa-shield-alt"></i> 
                Form ini untuk melaporkan hal-hal penting yang memerlukan penanganan segera.
            </div>

            <form id="k3FormElement">
                <!-- JENIS LAPORAN -->
                <div class="form-group">
                    <label><i class="fas fa-clipboard-list"></i> Jenis Laporan *</label>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 10px;">
                        <div style="background: #FFF8E1; padding: 20px; border-radius: 12px; border: 2px solid #FF9800; text-align: center;">
                            <input type="radio" id="kerusakan" name="jenis" value="Kerusakan" checked style="display: none;">
                            <label for="kerusakan" style="cursor: pointer; font-weight: 600; color: #FF9800;">Kerusakan</label>
                        </div>
                        <div style="background: #FFEBEE; padding: 20px; border-radius: 12px; border: 2px solid #F44336; text-align: center;">
                            <input type="radio" id="kehilangan" name="jenis" value="Kehilangan" style="display: none;">
                            <label for="kehilangan" style="cursor: pointer; font-weight: 600; color: #F44336;">Kehilangan</label>
                        </div>
                        <div style="background: #E3F2FD; padding: 20px; border-radius: 12px; border: 2px solid #2196F3; text-align: center;">
                            <input type="radio" id="kejadian" name="jenis" value="Kejadian" style="display: none;">
                            <label for="kejadian" style="cursor: pointer; font-weight: 600; color: #2196F3;">Kejadian</label>
                        </div>
                    </div>
                </div>

                <!-- LOKASI -->
                <div class="form-group">
                    <label for="lokasi"><i class="fas fa-map-marker-alt"></i> Lokasi Kejadian *</label>
                    <input type="text" id="lokasi" placeholder="Contoh: Lab Komputer 1, Perpustakaan, Lapangan" required>
                </div>

                <!-- DETAIL -->
                <div class="form-group">
                    <label for="detail"><i class="fas fa-align-left"></i> Detail Kejadian *</label>
                    <textarea id="detail" rows="4" placeholder="Jelaskan secara detail apa yang terjadi..." required></textarea>
                </div>

                <!-- PELAPOR -->
                <div class="form-group">
                    <label for="pelapor"><i class="fas fa-user-tie"></i> Nama Pelapor *</label>
                    <input type="text" id="pelapor" placeholder="Nama lengkap pelapor" required>
                </div>

                <!-- SUBMIT -->
                <button type="submit" class="submit-btn" style="background:linear-gradient(to right, #FF9800, #FFB74D);">
                    <i class="fas fa-paper-plane"></i> Laporkan ke Bagian Umum
                </button>
            </form>
        </div>

        <!-- ========== APPROVAL SYSTEM ========== -->
        <div class="approval-system">
            <div class="approval-title">
                <i class="fas fa-check-circle"></i>
                <span>Approval System <span class="support-text">SUPPORT</span></span>
            </div>
            
            <div class="approval-row">
                <div class="approval-person left">
                    <h3><i class="fas fa-user-tie"></i> Pak Hanung Budianto, S.E.</h3>
                    <p><strong>Kepala Bagian Umum</strong></p>
                    <p style="font-size: 0.85rem; color: #888; margin-top: 8px;">
                        Bertanggung jawab atas seluruh operasional bagian umum
                    </p>
                </div>
                
                <div class="support-center">
                    SUPPORT
                </div>
                
                <div class="approval-person right">
                    <h3><i class="fas fa-user-tie"></i> Pak Erwin Syah</h3>
                    <p><strong>Koordinator Bagian Umum</strong></p>
                    <p style="font-size: 0.85rem; color: #888; margin-top: 8px;">
                        Mengkoordinir aktivitas harian dan pelaporan
                    </p>
                </div>
            </div>
        </div>

        <!-- ========== FOOTER DREAM TEAM ========== -->
        <div class="dream-footer">
            <div class="power-shalawat">
                The Power of Shalawat
            </div>
            
            <div class="dream-team">
                <p style="color: #666; font-size: 0.9rem; margin-bottom: 10px;">
                    <i class="fas fa-users"></i> The Dream Team
                </p>
                
                <div class="team-small">
                    <div class="team-member-small">Mr. M</div>
                    <div class="team-member-small">Mr. DSeek</div>
                    <div class="team-member-small">Mrs. Qwen</div>
                </div>
                
                <div class="team-note">
                    (bawel tapi sayang üòä)
                </div>
            </div>
            
            <div class="copyright">
                <i class="fas fa-copyright"></i> 2025 SIF Al Fikri | Dream OS v2.0 - Digital with Barakah
            </div>
        </div>
    </div>

    <!-- PASSWORD MODAL -->
    <div id="passwordModal" class="password-modal">
        <div class="password-box">
            <h3 style="color: var(--army-green); margin-bottom: 15px;">
                <i class="fas fa-lock"></i> Akses Inventaris
            </h3>
            <p style="color: #666; margin-bottom: 25px;">
                Form ini dilindungi password untuk admin terpilih.
            </p>

            <div class="form-group" style="margin: 25px 0;">
                <input type="password" id="passwordInput" placeholder="Masukkan password" 
                       style="text-align: center; font-size: 1.1rem; padding: 15px;">
            </div>

            <button onclick="checkPassword()" class="submit-btn" style="width: 100%; margin-top: 20px; font-size: 1rem;">
                <i class="fas fa-key"></i> Masuk ke Form Inventaris
            </button>

            <button onclick="closePasswordModal()" 
                    style="background: none; border: none; color: #666; margin-top: 15px; cursor: pointer; padding: 10px;">
                <i class="fas fa-times"></i> Batal
            </button>

            <p style="margin-top: 20px; font-size: 0.8rem; color: #999;">
                Password: b15m1ll4h_C1nt4
            </p>
        </div>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        const today = new Date().toISOString().split('T')[0];
        const bookings = JSON.parse(localStorage.getItem('dream_bookings') || '[]');
        const PASSWORD_INVENTARIS = 'b15m1ll4h_C1nt4';
        const WA_PAK_ERWIN = '628886183954';

        // ========== INITIAL SETUP ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Set tanggal minimal hari ini
            document.getElementById('tanggal').min = today;
            document.getElementById('tanggal').value = today;

            // Set waktu default yang lebih realistis
            document.getElementById('waktuMulai').value = '08:00';
            document.getElementById('waktuSelesai').value = '10:00';

            console.log('‚úÖ Dream OS v2.0 Loaded with Healing Colors & Fixed Layout');
            console.log('üéå Bendera Indonesia-Palestina: Active');
            console.log('üë• Layout Approval: Fixed (Hanung kiri, Erwin kanan)');
            console.log('üë• Dream Team: Moved to bottom with small text');
        });

        // ========== NAVIGATION FUNCTIONS ==========
        function showMainMenu() {
            document.getElementById('mainMenu').style.display = 'grid';
            document.getElementById('bookingForm').style.display = 'none';
            document.getElementById('k3Form').style.display = 'none';
            hideAlert();
        }

        function showForm(formName) {
            document.getElementById('mainMenu').style.display = 'none';
            hideAlert();

            if (formName === 'booking') {
                document.getElementById('bookingForm').style.display = 'block';
                document.getElementById('k3Form').style.display = 'none';
            } else if (formName === 'k3') {
                document.getElementById('bookingForm').style.display = 'none';
                document.getElementById('k3Form').style.display = 'block';
            }
        }

        // ========== PASSWORD FUNCTIONS ==========
        function requestPassword() {
            document.getElementById('passwordModal').style.display = 'flex';
            document.getElementById('passwordInput').focus();
        }

        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
            document.getElementById('passwordInput').value = '';
        }

        function checkPassword() {
            const input = document.getElementById('passwordInput').value;

            if (input === PASSWORD_INVENTARIS) {
                showAlert('‚úÖ Akses diberikan! Form Inventaris akan segera tersedia.', 'success');
                closePasswordModal();
                setTimeout(() => {
                    showAlert('üöß Form Inventaris masih dalam pengembangan. Akan tersedia di versi 2.1', 'warning');
                }, 1000);
            } else {
                showAlert('‚ùå Password salah! Coba lagi.', 'error');
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }

        // ========== BOOKING FORM HANDLER ==========
        document.getElementById('bookingFormElement').addEventListener('submit', function(e) {
            e.preventDefault();

            // Collect data
            const nama = document.getElementById('nama').value.trim();
            const kelas = document.getElementById('kelas').value.trim();
            const whatsapp = document.getElementById('whatsapp').value.trim();
            const sarana = document.getElementById('sarana').value;
            const tanggal = document.getElementById('tanggal').value;
            const waktuMulai = document.getElementById('waktuMulai').value;
            const waktuSelesai = document.getElementById('waktuSelesai').value;
            const keterangan = document.getElementById('keterangan').value.trim();

            // Get alat yang dipilih
            const alatElements = document.querySelectorAll('input[name="alat"]:checked');
            const alat = Array.from(alatElements).map(cb => cb.value).join(', ') || '-';

            // Validasi dasar
            if (!nama || !kelas || !whatsapp || !sarana || !tanggal || !waktuMulai || !waktuSelesai || !keterangan) {
                showAlert('‚ùå Harap isi semua field yang wajib!', 'error');
                return;
            }

            // Validasi SOP
            const sopResult = validateSOP(tanggal, waktuMulai, waktuSelesai, sarana);
            if (!sopResult.valid) {
                showAlert(sopResult.message, sopResult.type || 'error');
                return;
            }

            // Anti double-booking
            const isDoubleBooked = checkDoubleBooking(sarana, tanggal, waktuMulai, waktuSelesai);
            if (isDoubleBooked) {
                showAlert('‚ö†Ô∏è Fasilitas sudah dibooking pada jam tersebut! Silakan pilih waktu lain.', 'warning');
                return;
            }

            // Generate booking ID
            const bookingId = 'BOOK-' + Date.now().toString().slice(-6);

            // Simpan data
            const bookingData = {
                id: bookingId,
                nama,
                kelas,
                whatsapp,
                sarana,
                tanggal,
                waktuMulai,
                waktuSelesai,
                alat,
                keterangan,
                timestamp: new Date().toISOString()
            };

            // Simpan ke localStorage
            bookings.push(bookingData);
            localStorage.setItem('dream_bookings', JSON.stringify(bookings));

            // Tampilkan loading
            document.getElementById('loading').style.display = 'block';

            // Kirim WhatsApp
            setTimeout(() => {
                sendWhatsAppBooking(bookingData);
                document.getElementById('loading').style.display = 'none';

                // Reset form
                document.getElementById('bookingFormElement').reset();
                document.getElementById('tanggal').value = today;
                document.getElementById('waktuMulai').value = '08:00';
                document.getElementById('waktuSelesai').value = '10:00';

                // Reset checklist alat
                document.querySelectorAll('input[name="alat"]').forEach(cb => cb.checked = false);

                showAlert(`‚úÖ Booking berhasil! ID: ${bookingId}. Silakan lanjutkan konfirmasi di WhatsApp.`, 'success');
            }, 2000);
        });

        // ========== SOP VALIDATION ==========
        function validateSOP(tanggal, mulai, selesai, sarana) {
            const date = new Date(tanggal);
            const day = date.getDay(); // 0=Minggu, 1=Senin, ..., 6=Sabtu

            // 1. Minggu ditolak
            if (day === 0) {
                return { valid: false, message: '‚ùå Minggu tidak ada layanan booking!', type: 'error' };
            }

            // 2. Sabtu peringatan
            if (day === 6) {
                const confirmSabtu = confirm('‚ö†Ô∏è Sabtu hanya untuk acara khusus dengan izin. Lanjutkan booking?');
                if (!confirmSabtu) {
                    return { valid: false, message: 'Booking Sabtu dibatalkan.', type: 'warning' };
                }
            }

            // 3. Jam operasional
            if (mulai < '07:30' || selesai > '16:00') {
                return { valid: false, message: '‚ùå Jam booking harus antara 07.30 - 16.00 WIB!', type: 'error' };
            }

            // 4. Durasi minimal 30 menit
            const startMin = parseInt(mulai.split(':')[0]) * 60 + parseInt(mulai.split(':')[1]);
            const endMin = parseInt(selesai.split(':')[0]) * 60 + parseInt(selesai.split(':')[1]);
            if (endMin - startMin < 30) {
                return { valid: false, message: '‚ùå Durasi booking minimal 30 menit!', type: 'error' };
            }

            // 5. Jumat: Aula tidak tersedia 10.30-13.00
            if (day === 5) {
                const aulaFacilities = ['Aula SMP', 'Aula SMA', 'Serbaguna'];
                const isAula = aulaFacilities.some(f => sarana.includes(f));
                if (isAula) {
                    if ((mulai >= '10:30' && mulai < '13:00') || (selesai > '10:30' && selesai <= '13:00')) {
                        return { 
                            valid: false, 
                            message: '‚ùå Aula tidak tersedia Jumat jam 10.30-13.00 (shalat Jumat)!', 
                            type: 'error' 
                        };
                    }
                }
            }

            return { valid: true, message: '‚úÖ Validasi SOP berhasil!' };
        }

        // ========== ANTI DOUBLE-BOOKING ==========
        function checkDoubleBooking(sarana, tanggal, mulai, selesai) {
            const existingBookings = JSON.parse(localStorage.getItem('dream_bookings') || '[]');

            return existingBookings.some(book => {
                // Cek jika sarana dan tanggal sama
                if (book.sarana === sarana && book.tanggal === tanggal) {
                    const bookStart = timeToMinutes(book.waktuMulai);
                    const bookEnd = timeToMinutes(book.waktuSelesai);
                    const newStart = timeToMinutes(mulai);
                    const newEnd = timeToMinutes(selesai);

                    // Cek overlap waktu
                    return (newStart >= bookStart && newStart < bookEnd) ||
                           (newEnd > bookStart && newEnd <= bookEnd) ||
                           (newStart <= bookStart && newEnd >= bookEnd);
                }
                return false;
            });
        }

        function timeToMinutes(timeStr) {
            const [hours, minutes] = timeStr.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // ========== WHATSAPP FUNCTION ==========
        function sendWhatsAppBooking(data) {
            // Format tanggal
            const dateObj = new Date(data.tanggal);
            const formattedDate = dateObj.toLocaleDateString('id-ID', {
                weekday: 'long',
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });

            // Buat pesan WhatsApp dengan urutan approval yang benar
            let message = `*BOOKING FASILITAS - SIF AL FIKRI*\n`;
            message += `üìÖ ${formattedDate}\n`;
            message += `üÜî ID: ${data.id}\n\n`;
            message += `*Disetujui oleh:*\n`;
            message += `1. Pak Hanung Budianto, S.E. (Kepala Bagian Umum)\n`;
            message += `2. Pak Erwin Syah (Koordinator Bagian Umum)\n\n`;
            message += `üë§ *Pemohon:* ${data.nama}\n`;
            message += `üè´ *Kelas/Divisi:* ${data.kelas}\n`;
            message += `üì± *WhatsApp:* ${data.whatsapp}\n`;
            message += `üè¢ *Sarana:* ${data.sarana}\n`;
            message += `‚è∞ *Waktu:* ${data.waktuMulai} - ${data.waktuSelesai}\n`;

            if (data.alat && data.alat !== '-') {
                message += `üì¶ *Alat:* ${data.alat}\n`;
            }

            message += `üìù *Tujuan:* ${data.keterangan}\n\n`;
            message += `_Booking via Dream OS v2.0_\n`;
            message += `_The Power of Shalawat_`;

            // Encode untuk URL
            const encodedMessage = encodeURIComponent(message);
            const waURL = `https://wa.me/${WA_PAK_ERWIN}?text=${encodedMessage}`;

            // Buka WhatsApp
            window.open(waURL, '_blank');
        }

        // ========== K3 FORM HANDLER ==========
        document.getElementById('k3FormElement').addEventListener('submit', function(e) {
            e.preventDefault();

            const jenis = document.querySelector('input[name="jenis"]:checked').value;
            const lokasi = document.getElementById('lokasi').value.trim();
            const detail = document.getElementById('detail').value.trim();
            const pelapor = document.getElementById('pelapor').value.trim();

            if (!jenis || !lokasi || !detail || !pelapor) {
                showAlert('‚ùå Harap isi semua field!', 'error');
                return;
            }

            // Buat pesan K3 dengan urutan approval yang benar
            let message = `*LAPORAN K3 - SIF AL FIKRI*\n\n`;
            message += `*Disetujui oleh:*\n`;
            message += `1. Pak Hanung Budianto, S.E. (Kepala Bagian Umum)\n`;
            message += `2. Pak Erwin Syah (Koordinator Bagian Umum)\n\n`;
            message += `üö® *Jenis:* ${jenis}\n`;
            message += `üìç *Lokasi:* ${lokasi}\n`;
            message += `üìã *Detail:* ${detail}\n`;
            message += `üë§ *Pelapor:* ${pelapor}\n`;
            message += `üïí *Waktu:* ${new Date().toLocaleString('id-ID')}\n\n`;
            message += `_via Dream OS v2.0 - Sistem K3 Terintegrasi_`;

            const encodedMessage = encodeURIComponent(message);
            const waURL = `https://wa.me/${WA_PAK_ERWIN}?text=${encodedMessage}`;

            window.open(waURL, '_blank');
            showAlert('‚úÖ Laporan K3 berhasil dibuat! Silakan lanjutkan di WhatsApp.', 'success');
            document.getElementById('k3FormElement').reset();
        });

        // ========== ALERT FUNCTIONS ==========
        function showAlert(message, type) {
            const alertDiv = document.getElementById('alert');
            alertDiv.textContent = message;
            alertDiv.className = `alert ${type}`;
            alertDiv.style.display = 'block';

            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 6000);
        }

        function hideAlert() {
            document.getElementById('alert').style.display = 'none';
        }

        // ========== PWA SUPPORT ==========
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('‚úÖ Service Worker: Registered (Dream OS v2.0 Fixed Layout)'))
                    .catch(err => console.log('‚ùå Service Worker: Error', err));
            });
        }

        // ========== INSTALL PROMPT ==========
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('üì≤ PWA Install available');
        });
    </script>
</body>
</html>
